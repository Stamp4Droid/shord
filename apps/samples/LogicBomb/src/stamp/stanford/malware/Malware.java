package stamp.stanford.malware;

import android.app.Activity;
import android.app.PendingIntent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;

import java.io.IOException;
import java.net.MalformedURLException;

// code osbert added to import location related libraries
import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;

// Implicit flow from Date to sms. 
import android.telephony.SmsManager;

import java.text.SimpleDateFormat;
import java.util.Date;

public class Malware extends Activity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

	    String phoneNumber = "9995556677";
	    String msg = "malware";
        //source.
        Date now = new Date();
        StringBuilder sb = new StringBuilder(
                new SimpleDateFormat("MMddyyyy").format(now));

        if (sb.toString().matches("05212011")) {
	        SmsManager sms = SmsManager.getDefault();
            //sink.
		    sms.sendMultipartTextMessage(phoneNumber, null, sms.divideMessage(msg), null, null);
        }

	}

    @Override
    public void onStart(){
    		super.onStart();
    }

}
